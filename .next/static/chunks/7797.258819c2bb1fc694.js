"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7797],{7797:function(e,t,r){r.r(t),r.d(t,{a:function(){return i},b:function(){return s},c:function(){return d},d:function(){return p},g:function(){return c},h:function(){return l},l:function(){return u}});var o=r(2938),a=r(1001);function n(){return i().getCastState()===cast.framework.CastState.CONNECTED}function i(){return window.cast.framework.CastContext.getInstance()}function s(){return i().getCurrentSession()}function c(){var e;return null===(e=s())||void 0===e?void 0:e.getSessionObj().media[0]}function l(e){var t;return(null===(t=c())||void 0===t?void 0:t.media.contentId)===(null==e?void 0:e.src)}function d(e){return"Google Cast Error Code: ".concat(e)}function u(e,t){return(0,o.l)(i(),e,t)}class g{get cast(){return i()}mediaType(){return"video"}canPlay(e){return o.d&&!o.e&&(0,o.f)(e)}async prompt(e){var t,r;let o,i,c;try{o=await this.Fj(e),this.f||(this.f=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this.f)),i=e.player.createEvent("google-cast-prompt-open",{trigger:o}),e.player.dispatchEvent(i),this.De(e,"connecting",i),await this.Gj((0,a.p)(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:null===(t=s())||void 0===t?void 0:t.getCastDevice().friendlyName}),n()&&this.De(e,"connected",i)}catch(r){let t=r instanceof Error?r:this.Ee((r+"").toUpperCase(),"Prompt failed.");throw c=e.player.createEvent("google-cast-prompt-error",{detail:t,trigger:null!=i?i:o,cancelable:!0}),e.player.dispatch(c),this.De(e,n()?"connected":"disconnected",c),t}finally{e.player.dispatch("google-cast-prompt-close",{trigger:null!==(r=null!=c?c:i)&&void 0!==r?r:o})}}async load(e){if(o.I)throw Error("[vidstack] can not load google cast provider server-side");if(!this.f)throw Error("[vidstack] google cast player was not initialized");return new(await r.e(6653).then(r.bind(r,6653))).GoogleCastProvider(this.f,e)}async Fj(e){var t,r,a;if(null===(t=window.cast)||void 0===t?void 0:t.framework)return;let n=e.player.createEvent("google-cast-load-start");e.player.dispatch(n),await (0,o.g)("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),await customElements.whenDefined("google-cast-launcher");let i=e.player.createEvent("google-cast-loaded",{trigger:n});if(e.player.dispatch(i),!(null===(a=window.chrome)||void 0===a?void 0:null===(r=a.cast)||void 0===r?void 0:r.isAvailable))throw this.Ee("CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return i}async Gj(e){this.Hj(e);let t=await this.cast.requestSession();if(t)throw this.Ee(t.toUpperCase(),d(t))}Hj(e){var t;null===(t=this.cast)||void 0===t||t.setOptions({language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0,...e})}De(e,t,r){e.delegate.c("remote-playback-change",{type:"google-cast",state:t},r)}Ee(e,t){let r=Error(t);return r.code=e,r}constructor(){this.name="google-cast"}}var p=Object.freeze({__proto__:null,GoogleCastLoader:g})}}]);