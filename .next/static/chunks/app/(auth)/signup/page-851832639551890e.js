(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2129],{6647:function(){},1364:function(e,t,r){Promise.resolve().then(r.t.bind(r,231,23)),Promise.resolve().then(r.bind(r,605))},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},605:function(e,t,r){"use strict";var a=r(7437),s=r(8378),o=r(6463),n=r(2265),l=r(7776);t.default=e=>{let{mode:t}=e;(0,o.useRouter)();let r={full_name:"signup"===t?"":void 0,email:"",password:"",confirmPassword:"signup"===t?"":void 0,contact:"signup"===t?"":void 0},[c,i]=(0,n.useState)(r),[d,u]=(0,n.useState)({full_name:"",email:"",password:"",confirmPassword:"",contact:""}),[m,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{i(r)},[t]);let f=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"Invalid email address",g=e=>e.length>=6?"":"Password must be at least 6 characters",x=(e,t)=>e===t?"":"Passwords do not match",h=e=>e&&/^\d{10}$/.test(e)?"":"Invalid phone number",w=e=>{let{name:t,value:r}=e.target;i({...c,[t]:r})},b=async e=>{e.preventDefault();let r=f(c.email),a=g(c.password),o="signup"===t?x(c.password,c.confirmPassword):"",n="signup"===t?h(c.contact):"";if(r||a||o||n){u({full_name:"",email:r,password:a,confirmPassword:o,contact:n});return}u({email:"",password:"",confirmPassword:"",contact:"",full_name:""}),p(!0);try{let e=await s.Z.post("/auth/".concat(t),c);if(console.log(e.data),401===e.data.code){l.Am.error("Invalid password provided for login");return}if("User already exists"===e.data.error){l.Am.error("User already exists with the provided email so please login instead");return}if(console.log(e.data.errro),"User not found"===e.data.error){l.Am.error("User not found or invalid password provided for login");return}try{localStorage.setItem("accessToken",e.data.accessToken),localStorage.setItem("userId",e.data.user._id),localStorage.setItem("userRole",e.data.isProduction?"production":"user"),localStorage.setItem("isLogin","true")}catch(e){l.Am.error("Failed to save access token to local storage")}l.Am.success("".concat("login"===t?"Login":"Signup"," form submitted")),window.location.href="/"}catch(e){console.error("Submission error",e),l.Am.error("Failed to submit form please try again")}finally{p(!1)}};return(0,a.jsx)("div",{className:"w-full text-white max-w-md mx-auto",children:(0,a.jsxs)("form",{onSubmit:b,noValidate:!0,children:["signup"===t&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("input",{className:"w-full px-8 py-4 rounded-lg font-medium  border-2 bg-transparent ".concat(d.full_name?"border-red-500":"border-gray-200"," placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white"),type:"text",name:"full_name",value:c.full_name,onChange:w,placeholder:"Full Name"}),d.full_name&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-2",children:d.full_name})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("input",{className:"w-full px-8 py-4 rounded-lg font-medium  bg-transparent  border-2 ".concat(d.email?"border-red-500":"border-gray-200"," text-sm focus:outline-none "),type:"email",name:"email",value:c.email,onChange:w,placeholder:"Email"}),d.email&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-2",children:d.email})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("input",{className:"w-full px-8 py-4 rounded-lg font-medium bg-transparent  border-2 ".concat(d.password?"border-red-500":"border-gray-200","  text-sm focus:outline-none  mt-5"),type:"password",name:"password",value:c.password,onChange:w,placeholder:"Password"}),d.password&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-2",children:d.password})]}),"signup"===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("input",{className:"w-full px-8 py-4 rounded-lg font-medium  border-2 bg-transparent ".concat(d.confirmPassword?"border-red-500":"border-gray-200","  text-sm focus:outline-none  mt-5"),type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:w,placeholder:"Confirm Password"}),d.confirmPassword&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-2",children:d.confirmPassword})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("input",{className:"w-full px-8 py-4 rounded-lg font-medium  border-2 bg-transparent ".concat(d.contact?"border-red-500":"border-gray-200","  text-sm focus:outline-none  mt-5"),type:"tel",name:"contact",value:c.contact,onChange:w,placeholder:"Phone Number"}),d.contact&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-2",children:d.contact})]})]}),(0,a.jsx)("button",{className:"mt-5 tracking-wide font-semibold bg-green-500 text-black w-full py-4 rounded-lg hover:bg-green-500 transition-all duration-300 ease-in-out flex items-center justify-center focus:shadow-outline focus:outline-none",type:"submit",disabled:m,children:m?(0,a.jsxs)("svg",{className:"w-6 h-6 animate-spin",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0l4 4-4 4V5a7 7 0 100 14v-3l4 4-4 4v-2a8 8 0 01-8-8z"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"w-6 h-6 -ml-2",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),(0,a.jsx)("circle",{cx:"8.5",cy:7,r:4}),(0,a.jsx)("path",{d:"M20 8v6M23 11h-6"})]}),(0,a.jsx)("span",{className:"ml-3",children:"login"===t?"Login":"Sign Up"})]})})]})})}},8378:function(e,t,r){"use strict";var a=r(8472),s=r(9930),o=r.n(s),n=r(3711);o().config(),console.log("http://localhost:8080","api");let l=a.Z.create({baseURL:"".concat("https://api.zynoflixott.com","/api"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.To)}});t.Z=l},3711:function(e,t,r){"use strict";r.d(t,{To:function(){return s},bg:function(){return n},g4:function(){return l},xS:function(){return a},yv:function(){return o}});let a=localStorage.getItem("userId"),s=localStorage.getItem("accessToken");localStorage.getItem("transactionId");let o=localStorage.getItem("userRole"),n=!localStorage.getItem("isLogin"),l=localStorage.getItem("userId")}},function(e){e.O(0,[8218,8472,744,1135,7776,231,2971,7023,1744],function(){return e(e.s=1364)}),_N_E=e.O()}]);