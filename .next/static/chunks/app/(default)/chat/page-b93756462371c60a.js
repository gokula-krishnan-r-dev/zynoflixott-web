(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7339,9203],{6647:function(){},3325:function(e,t,n){Promise.resolve().then(n.bind(n,6152))},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=n(9920)._(n(2265)).default.createContext(null)},6152:function(e,t,n){"use strict";n.r(t);var r=n(7437),o=n(4634),s=n(1880),l=n(8378),a=n(6463);n(2265);var c=n(9555),i=n(7776);t.default=()=>{let e=(0,a.useRouter)(),t=async()=>{var t,n;let r=await l.Z.get("/chat/");return 200!==r.status&&i.Am.error(r.data.error),e.push("/chat/"+(null==r?void 0:null===(n=r.data)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.roomId)),r.data},{data:n,isLoading:u,isError:d,refetch:f}=(0,c.useQuery)("chat",()=>{t()});return u?(0,r.jsx)("div",{children:"Loading..."}):d?(0,r.jsx)("div",{children:"Error fetching messages"}):(0,r.jsx)("div",{children:(0,r.jsx)(s.a,{roomId:"23",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)(o.default,{})})})})})}},4634:function(e,t,n){"use strict";n.r(t);var r=n(7437),o=n(8378),s=n(2265),l=n(9555),a=n(1880),c=n(3711),i=n(9354),u=n(6648),d=n(23),f=n(9779);let h=async e=>(await o.Z.get("/message/"+e)).data;t.default=()=>{let[e,t]=s.useState(""),{roomId:n,socket:o,isOpen:m}=(0,a.R)(),{data:x,isLoading:g,isError:v,refetch:p}=(0,l.useQuery)(["message",n],()=>h(n),{refetchInterval:5e3}),j=()=>{let r=c.xS;o.emit("send-message",{content:e,roomId:n,sender:r}),t(""),p(),p()};return g?(0,r.jsx)("div",{children:"Loading..."}):v?(0,r.jsx)("div",{children:"Error fetching messages"}):(0,r.jsxs)("div",{className:(0,i.cn)("flex-1 flex flex-col w-full p-6 relative bg-gray-900 rounded-3xl mx-6"),children:[0===x.length&&(0,r.jsx)("div",{className:"flex items-center justify-center absolute top-[40%] left-[45%]",children:(0,r.jsx)("p",{className:"text-white",children:"No messages yet"})}),(0,r.jsx)(d.x,{className:(0,i.cn)("w-full h-[75vh]  mb-4",m?"hidden":"w-full"),children:(0,r.jsx)("div",{className:"w-full",children:x&&(null==x?void 0:x.map((e,t)=>{var n;return(0,r.jsx)("div",{className:(0,i.cn)("col-end-8 p-3 rounded-lg",e.sender===c.xS?"col-start-6":"col-start-1"),children:(0,r.jsxs)("div",{className:(0,i.cn)("flex items-center gap-3",e.sender===c.xS?"flex-row-reverse":"flex-row"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsx)(u.default,{className:"flex items-center justify-center h-10 w-10 rounded-full bg-indigo-500 flex-shrink-0",src:null==e?void 0:null===(n=e.userId)||void 0===n?void 0:n.profilePic,alt:"profile-pic",width:"30",height:"30"})}),(0,r.jsx)("div",{className:"relative ml-3 text-sm bg-white py-2 px-4 shadow rounded-xl",children:(0,r.jsx)("div",{children:e.content})})]}),(0,r.jsx)("div",{className:"text-white",children:(0,r.jsx)("p",{children:(0,f.lE)(e.createdAt)})})]})},t)}))})}),(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-row items-center h-16 rounded-xl bg-white w-full px-4",m?"lg:block hidden":"w-full lg:w-auto"),children:[(0,r.jsx)("div",{className:"flex-grow ml-4",children:(0,r.jsx)("div",{className:"relative w-full",children:(0,r.jsx)("input",{value:e,onKeyDown:e=>{"Enter"===e.key&&j()},onChange:e=>t(e.target.value),type:"text",className:"flex w-full border rounded-xl focus:outline-none focus:border-indigo-300 pl-4 h-10"})})}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsxs)("button",{onClick:j,className:"flex items-center justify-center bg-indigo-500 hover:bg-indigo-600 rounded-xl text-white px-4 py-1 flex-shrink-0",children:[(0,r.jsx)("span",{children:"Send"}),(0,r.jsx)("span",{className:"ml-2",children:(0,r.jsx)("svg",{className:"w-4 h-4 transform rotate-45 -mt-px",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})}},1880:function(e,t,n){"use strict";n.d(t,{R:function(){return i},a:function(){return c}});var r=n(7437),o=n(3711),s=n(2265),l=n(4999);let a=(0,s.createContext)({roomId:null,socket:null,isOpen:!1,setIsOpen:()=>{}}),c=e=>{let{children:t,roomId:n}=e,c=o.xS,[i,u]=s.useState(!1),[d,f]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=(0,l.ZP)("https://chat.zynoflixott.com");return f(e),()=>{e.disconnect()}},[]),(0,s.useEffect)(()=>{d&&d.emit("join-room",{roomId:n,userId:[c,"666ff6eab2e260249caa5445"],name:"name"})},[d,n,c]),(0,r.jsx)(a.Provider,{value:{socket:d,roomId:n,isOpen:i,setIsOpen:u},children:t})},i=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useChat must be used within a ChatProvider");return e}},23:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var r=n(7437),o=n(2265),s=n(3663),l=n(9354);let a=o.forwardRef((e,t)=>{let{className:n,children:o,...a}=e;return(0,r.jsxs)(s.fC,{ref:t,className:(0,l.cn)("relative overflow-hidden",n),...a,children:[(0,r.jsx)(s.l_,{className:"h-full w-full rounded-[inherit]",children:o}),(0,r.jsx)(c,{}),(0,r.jsx)(s.Ns,{})]})});a.displayName=s.fC.displayName;let c=o.forwardRef((e,t)=>{let{className:n,orientation:o="vertical",...a}=e;return(0,r.jsx)(s.gb,{ref:t,orientation:o,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===o&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===o&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...a,children:(0,r.jsx)(s.q4,{className:"relative flex-1 rounded-full bg-zinc-200 dark:bg-zinc-800"})})});c.displayName=s.gb.displayName},8378:function(e,t,n){"use strict";var r=n(8472),o=n(9930),s=n.n(o),l=n(3711);s().config(),console.log("http://localhost:8080","api");let a=r.Z.create({baseURL:"".concat("https://api.zynoflixott.com","/api"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.To)}});t.Z=a},9779:function(e,t,n){"use strict";function r(e){e instanceof Date||console.log("publishedAt is not a Date object");let t=new Date(e),n=Math.floor((Date.now()-t.getTime())/1e3);return n<60?"".concat(n," sec ago"):n<3600?"".concat(Math.floor(n/60)," min ago"):n<86400?"".concat(Math.floor(n/3600)," hour ago"):n<2592e3?"".concat(Math.floor(n/86400)," day ago"):"".concat(Math.floor(n/2592e3)," month ago")}function o(e,t){if(e<0)throw Error("Negative values are not allowed.");let n=Math.round(60*e),r=Math.floor(n/3600),o=n%3600,s=Math.floor(o/60),l=o%60;if(t)return e<1?"".concat(n," second").concat(1!==n?"s":""):"".concat(Math.round(e)," min").concat(1!==Math.round(e)?"s":"");let a="";return r>0&&(a+="".concat(r," hour").concat(r>1?"s":""),(s>0||l>0)&&(a+=" ")),s>0&&(a+="".concat(s," min").concat(s>1?"s":""),l>0&&(a+=" ")),(l>0||""===a)&&(a+="".concat(l," second").concat(l>1?"s":"")),a}function s(e){let t=new Date(e);isNaN(t.getTime())&&console.log("isMembership",t),console.log("isMembership",t);let n=new Date().getTime()-t.getTime();console.log("isMembership",n);let r=n/864e5;return console.log("isMembership",r),r>=30}n.d(t,{Eb:function(){return s},iB:function(){return o},lE:function(){return r}})},3711:function(e,t,n){"use strict";n.d(t,{To:function(){return o},bg:function(){return l},g4:function(){return a},xS:function(){return r},yv:function(){return s}});let r=localStorage.getItem("userId"),o=localStorage.getItem("accessToken");localStorage.getItem("transactionId");let s=localStorage.getItem("userRole"),l=!localStorage.getItem("isLogin"),a=localStorage.getItem("userId")},9354:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var r=n(4839),o=n(6164);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)((0,r.W)(t))}n(8378),n(3711)}},function(e){e.O(0,[8218,8472,744,1135,7776,6648,9555,4868,3663,4999,2971,7023,1744],function(){return e(e.s=3325)}),_N_E=e.O()}]);