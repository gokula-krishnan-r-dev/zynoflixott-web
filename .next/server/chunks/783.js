"use strict";exports.id=783,exports.ids=[783],exports.modules={65783:(e,s,l)=>{l.r(s),l.d(s,{default:()=>u});var r=l(10326),t=l(72018),i=l(17577),n=l.n(i),d=l(2994),a=l(43964),c=l(34541),x=l(51223),o=l(46226),h=l(3236),m=l(40169);let f=async e=>(await t.Z.get("/message/"+e)).data,u=()=>{let[e,s]=n().useState(""),{roomId:l,socket:t,isOpen:i}=(0,a.R)(),{data:u,isLoading:g,isError:j,refetch:v}=(0,d.useQuery)(["message",l],()=>f(l),{refetchInterval:5e3}),p=()=>{let r=c.xS;t.emit("send-message",{content:e,roomId:l,sender:r}),s(""),v(),v()};return g?r.jsx("div",{children:"Loading..."}):j?r.jsx("div",{children:"Error fetching messages"}):(0,r.jsxs)("div",{className:(0,x.cn)("flex-1 flex flex-col w-full p-6 relative bg-gray-900 rounded-3xl mx-6"),children:[0===u.length&&r.jsx("div",{className:"flex items-center justify-center absolute top-[40%] left-[45%]",children:r.jsx("p",{className:"text-white",children:"No messages yet"})}),r.jsx(h.x,{className:(0,x.cn)("w-full h-[75vh]  mb-4",i?"hidden":"w-full"),children:r.jsx("div",{className:"w-full",children:u&&u?.map((e,s)=>r.jsx("div",{className:x.cn("col-end-8 p-3 rounded-lg",e.sender===c.xS?"col-start-6":"col-start-1"),children:r.jsxs("div",{className:x.cn("flex items-center gap-3",e.sender===c.xS?"flex-row-reverse":"flex-row"),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center gap-3",children:r.jsx(o.default,{className:"flex items-center justify-center h-10 w-10 rounded-full bg-indigo-500 flex-shrink-0",src:e?.userId?.profilePic,alt:"profile-pic",width:"30",height:"30"})}),r.jsx("div",{className:"relative ml-3 text-sm bg-white py-2 px-4 shadow rounded-xl",children:r.jsx("div",{children:e.content})})]}),r.jsx("div",{className:"text-white",children:r.jsx("p",{children:m.lE(e.createdAt)})})]})},s))})}),(0,r.jsxs)("div",{className:(0,x.cn)("flex flex-row items-center h-16 rounded-xl bg-white w-full px-4",i?"lg:block hidden":"w-full lg:w-auto"),children:[r.jsx("div",{className:"flex-grow ml-4",children:r.jsx("div",{className:"relative w-full",children:r.jsx("input",{value:e,onKeyDown:e=>{"Enter"===e.key&&p()},onChange:e=>s(e.target.value),type:"text",className:"flex w-full border rounded-xl focus:outline-none focus:border-indigo-300 pl-4 h-10"})})}),r.jsx("div",{className:"ml-4",children:(0,r.jsxs)("button",{onClick:p,className:"flex items-center justify-center bg-indigo-500 hover:bg-indigo-600 rounded-xl text-white px-4 py-1 flex-shrink-0",children:[r.jsx("span",{children:"Send"}),r.jsx("span",{className:"ml-2",children:r.jsx("svg",{className:"w-4 h-4 transform rotate-45 -mt-px",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})}}};